---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# Rphsrm

Rphsrm provides the package to evalute the software reliability from the fault data collected in the testing phase. Rphsrm uses two types of data; fault-detection time data and its grouped data. The fault-detection time data is a sequence of time intervals of fault detection times (CPU time, etc). Also its grouped data is a sequence of the number of detected faults for each time interval (per a working day, per a week, etc). The reliability evaluation is based on the software reliability growth model called PHSRM which is defined by NHPP (non-homogeneous Poisson process)
with phase-type fault-detection time distribution.

- Note: There are still some bugs.
- TODO:
  - Remove a bug when the number of phases is 1 and 2.
  - Remove a bug when the data is given as time data.

## Installation

You can install Rsrat from github with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("okamumu/Rphsrm")
```

## Example

This is an example of the estimation of software reliability growth models from a fault data (tohma). 

```{r example1}
### require load librareis; Rsrat and Rphsrm
library(Rsrat)
library(Rphsrm)

### load example data
data(dacs)

### tohma is a grouped data
tohma

### Esimate all models and select the best one in terms of AIC
(result <- fit.srm.cph(fault=tohma))

### Draw the graph 
mvfplot(fault=tohma, mvf=list(result$srm))
```

The second example illustrates the estimation for the model with user-specified phases

```{r example2}
### Estimate two models and no select
(result <- fit.srm.cph(fault=tohma, phase=c(3, 50), selection=NULL))

### Draw the graph
mvfplot(fault=tohma, mvf=lapply(result, function(m) m$srm))
```

The third example shows the case where the fault data are fault detection data.

```{r example3}
### fault-detection time data
#### Time intervals for all faults
#### The last value is a negative value, that indicates the time interval in which there is no fault detection after the last fault detection.
sys1

### Esimate
(result <- fit.srm.cph(time=sys1[sys1>=0], te=-sys1[sys1<0]))

### Draw the graph
mvfplot(time=sys1[sys1>=0], te=-sys1[sys1<0], mvf=list(result$srm))
```

The fourth example illustrates the case where the mvfs for all the models are drawn.

```{r example4}
### Esimate and return all the estimated results
(result <- fit.srm.cph(fault=sys1g, selection=NULL))

### Draw the graph
mvfplot(fault=sys1g, mvf=lapply(result, function(x) x$srm))
```
